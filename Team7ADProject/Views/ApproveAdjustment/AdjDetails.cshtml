@model Team7ADProject.ViewModels.AdjustmentDetailsViewModel
@using Team7ADProject.Entities
@{
                /**/

                ViewBag.Title = "Stock Adjustment Details";
                Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm("ApproveOrReject", "ApproveAdjustment"))
{
    <div class="custcontainer">
        <div class="row">
            <div>
                <table>
                    <tr>
                        <td> Stock Adjustment ID :</td>
                        <td> @Html.Label(Model.StockAdjustment.StockAdjId)</td>
                    </tr>
                    <tr>
                        <td> Employee Name :</td>
                        <td> @Html.Label(Model.StockAdjustment.AspNetUsers1.EmployeeName)</td>
                    </tr>
                    <tr>
                        <td> Date :</td>
                        <td> @Html.Label(Model.StockAdjustment.Date.ToShortDateString())</td>
                    </tr>
                </table>

                <table class="table table-striped table-condensed">
                    <thead>
                        <tr>
                            <th>Item No</th>
                            <th>Description</th>
                            <th>Adjustment Quantity</th>
                            <th>Price</th>
                            <th>Amount</th>
                            <th>Remarks</th>
                        </tr>
                    </thead>
                    <tbody>
                        @{
                            decimal? amount = 0;

                            foreach (var adj in Model.AdjustmentDetails)
                            {
                                <tr>
                                    <td>@adj.ItemId</td>
                                    <td>@adj.Stationery.Description</td>
                                    <td>@adj.Quantity</td>
                                    <td>$@adj.UnitPrice.ToString()</td>
                                    <td>$@(adj.Quantity * adj.UnitPrice)</td>
                                    <td>@adj.Remarks</td>
                                </tr>
                                amount += adj.Quantity * adj.UnitPrice;
                            }
                        }
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td><strong>Total</strong></td>
                            <td><strong>$@amount</strong></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                @{
                    if ((@Model.StockAdjustment.ApprovedBy == null) && (amount <= 250) && (User.IsInRole("Store Supervisor")))
                    {
                        @Html.ActionLink("Approve", "Approve", "ApproveAdjustment", new { stockAdjId = Model.StockAdjustment.StockAdjId }, new { @class = "btn btn-primary", onclick = "ApproveAlert()" })
                        @Html.ActionLink("Reject", "Reject", "ApproveAdjustment", new { stockAdjId = Model.StockAdjustment.StockAdjId }, new { @class = "btn btn-primary", onclick = "RejectAlert" })
                    }

                    if ((@Model.StockAdjustment.ApprovedBy == null) && (User.IsInRole("Store Manager")))
                    {
                        @Html.ActionLink("Approve", "Approve", "ApproveAdjustment", new { stockAdjId = Model.StockAdjustment.StockAdjId }, new { @class = "btn btn-primary", onclick = "ApproveAlert()" })
                        @Html.ActionLink("Reject", "Reject", "ApproveAdjustment", new { stockAdjId = Model.StockAdjustment.StockAdjId }, new { @class = "btn btn-primary", onclick = "RejectAlert" })
                    }
                }

                <br />
            </div>
        </div>
    </div>
    <script>
            function ApproveAlert() {
                alert("Approved Successfully")
            }
            function RejectAlert() {
                alert("Rejected Successfully")
            }
    </script>
}
